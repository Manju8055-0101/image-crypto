{"version":3,"file":"Decrypt-D6RDNkFq.js","sources":["../../src/pages/Decrypt.jsx"],"sourcesContent":["import React, { useState, useCallback } from 'react'\nimport { motion } from 'framer-motion'\nimport Card from '../components/common/Card'\nimport Button from '../components/common/Button'\nimport Input from '../components/common/Input'\nimport { useEncryptionStore } from '../store/themeStore'\nimport { decryptMessage } from '../lib/steganography'\n\nconst Decrypt = () => {\n  const {\n    selectedImage,\n    password,\n    isProcessing,\n    decryptedMessage,\n    setSelectedImage,\n    setPassword,\n    setIsProcessing,\n    setDecryptedMessage,\n    addToHistory,\n    reset,\n  } = useEncryptionStore()\n\n  const [error, setError] = useState('')\n  const [dragActive, setDragActive] = useState(false)\n  const [isSuccess, setIsSuccess] = useState(false)\n\n  const handleImageUpload = useCallback((file) => {\n    if (!file) return\n\n    if (!file.type.startsWith('image/')) {\n      setError('Please upload a valid image file')\n      return\n    }\n\n    const reader = new FileReader()\n    reader.onload = (e) => {\n      setSelectedImage({\n        file,\n        preview: e.target.result,\n        name: file.name,\n        size: file.size,\n      })\n      setError('')\n      setIsSuccess(false)\n    }\n    reader.readAsDataURL(file)\n  }, [setSelectedImage])\n\n  const handleDrop = useCallback((e) => {\n    e.preventDefault()\n    e.stopPropagation()\n    setDragActive(false)\n\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      handleImageUpload(e.dataTransfer.files[0])\n    }\n  }, [handleImageUpload])\n\n  const handleDecrypt = async () => {\n    if (!selectedImage) {\n      setError('Please select an encrypted image first')\n      return\n    }\n    if (!password.trim()) {\n      setError('Please enter the password')\n      return\n    }\n\n    setIsProcessing(true)\n    setError('')\n    setIsSuccess(false)\n\n    try {\n      const result = await decryptMessage(selectedImage.preview, password)\n      \n      setDecryptedMessage(result.message)\n      setIsSuccess(result.success)\n      \n      if (result.success) {\n        addToHistory({\n          type: 'decrypt',\n          originalSize: selectedImage.size,\n          timestamp: new Date().toISOString(),\n          status: 'success',\n        })\n      } else {\n        setError(result.message || 'Decryption failed. Wrong password or invalid image.')\n      }\n    } catch (err) {\n      setError(err.message || 'Decryption failed. Please try again.')\n    } finally {\n      setIsProcessing(false)\n    }\n  }\n\n  const copyToClipboard = () => {\n    navigator.clipboard.writeText(decryptedMessage)\n  }\n\n  return (\n    <div className=\"min-h-screen py-12\">\n      <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center mb-12\"\n        >\n          <h1 className=\"text-4xl font-bold gradient-text mb-4\">Decrypt Message</h1>\n          <p className=\"text-crypto-text-secondary max-w-2xl mx-auto\">\n            Extract hidden secret messages from encrypted images\n          </p>\n        </motion.div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n          {/* Left Column - Input */}\n          <motion.div\n            initial={{ opacity: 0, x: -20 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ delay: 0.2 }}\n          >\n            <Card>\n              <h2 className=\"text-xl font-semibold text-white mb-6\">1. Upload Encrypted Image</h2>\n              <div\n                className={`relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300 ${\n                  dragActive\n                    ? 'border-crypto-accent bg-crypto-accent/10'\n                    : 'border-crypto-accent/30 hover:border-crypto-accent/50'\n                }`}\n                onDragEnter={(e) => { e.preventDefault(); e.stopPropagation(); setDragActive(true) }}\n                onDragLeave={(e) => { e.preventDefault(); e.stopPropagation(); setDragActive(false) }}\n                onDragOver={(e) => { e.preventDefault(); e.stopPropagation() }}\n                onDrop={handleDrop}\n              >\n                {selectedImage ? (\n                  <div className=\"relative\">\n                    <img\n                      src={selectedImage.preview}\n                      alt=\"Preview\"\n                      className=\"max-h-64 mx-auto rounded-lg\"\n                    />\n                    <div className=\"mt-4\">\n                      <p className=\"text-white font-medium\">{selectedImage.name}</p>\n                      <p className=\"text-crypto-text-secondary text-sm\">\n                        {(selectedImage.size / 1024).toFixed(2)} KB\n                      </p>\n                      <button\n                        onClick={() => setSelectedImage(null)}\n                        className=\"text-crypto-error text-sm mt-2 hover:underline\"\n                      >\n                        Remove\n                      </button>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"py-8\">\n                    <svg className=\"mx-auto h-12 w-12 text-crypto-accent mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                    </svg>\n                    <p className=\"text-white mb-2\">Drag and drop an encrypted image here</p>\n                    <p className=\"text-crypto-text-secondary text-sm mb-4\">or</p>\n                    <label className=\"cursor-pointer\">\n                      <span className=\"text-crypto-accent hover:underline\">Browse files</span>\n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        className=\"hidden\"\n                        onChange={(e) => handleImageUpload(e.target.files[0])}\n                      />\n                    </label>\n                  </div>\n                )}\n              </div>\n\n              <h2 className=\"text-xl font-semibold text-white mb-6 mt-6\">2. Enter Password</h2>\n              <Input\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                placeholder=\"Enter decryption password\"\n              />\n\n              {error && (\n                <div className=\"mt-4 p-3 bg-crypto-error/10 border border-crypto-error/30 rounded-lg text-crypto-error text-sm\">\n                  {error}\n                </div>\n              )}\n\n              <div className=\"flex gap-4 mt-6\">\n                <Button\n                  variant=\"primary\"\n                  size=\"lg\"\n                  className=\"flex-1\"\n                  onClick={handleDecrypt}\n                  loading={isProcessing}\n                  disabled={!selectedImage || !password}\n                >\n                  {isProcessing ? 'Decrypting...' : 'Decrypt Message'}\n                </Button>\n                <Button\n                  variant=\"ghost\"\n                  size=\"lg\"\n                  onClick={reset}\n                >\n                  Reset\n                </Button>\n              </div>\n            </Card>\n          </motion.div>\n\n          {/* Right Column - Result */}\n          <motion.div\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ delay: 0.4 }}\n          >\n            <Card className=\"sticky top-24\">\n              <h2 className=\"text-xl font-semibold text-white mb-6\">Decrypted Message</h2>\n              \n              {isSuccess ? (\n                <div>\n                  <div className=\"p-4 bg-crypto-success/10 border border-crypto-success/30 rounded-lg mb-4\">\n                    <div className=\"flex items-center gap-2 text-crypto-success mb-2\">\n                      <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                      <span className=\"font-medium\">Message Decrypted Successfully!</span>\n                    </div>\n                  </div>\n                  <div className=\"bg-crypto-bg-tertiary rounded-lg p-4 mb-4 max-h-64 overflow-auto\">\n                    <p className=\"text-white whitespace-pre-wrap\">{decryptedMessage}</p>\n                  </div>\n                  <div className=\"flex gap-4\">\n                    <Button variant=\"primary\" className=\"flex-1\" onClick={copyToClipboard}>\n                      <svg className=\"w-5 h-5 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                      </svg>\n                      Copy to Clipboard\n                    </Button>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"py-16 text-center\">\n                  <svg className=\"mx-auto h-16 w-16 text-crypto-accent/30 mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                  </svg>\n                  <p className=\"text-crypto-text-secondary\">\n                    Your decrypted message will appear here\n                  </p>\n                </div>\n              )}\n            </Card>\n          </motion.div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Decrypt\n"],"names":["Decrypt","selectedImage","password","isProcessing","decryptedMessage","setSelectedImage","setPassword","setIsProcessing","setDecryptedMessage","addToHistory","reset","useEncryptionStore","error","setError","useState","dragActive","setDragActive","isSuccess","setIsSuccess","handleImageUpload","useCallback","file","reader","e","handleDrop","handleDecrypt","result","decryptMessage","err","copyToClipboard","jsxs","motion","jsx","Card","Input","Button"],"mappings":"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"}